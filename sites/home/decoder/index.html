<html lang='en'>

<head>
  <meta charset='utf-8' />
  <meta http-equiv='X-UA-Compatible' content='IE=edge'/>
  <meta property='og:image' content='../assets/privacy-sandbox-logo.png' />
  <meta property='og:title' content='Debug payload decoder for PAA' />
  <meta property='og:description' content='Decode the debug payload from an aggregatable report for the Private Aggregation API' />
  <meta name='description' content='Decode the debug payload from an aggregatable report for the Private Aggregation API' />
  <meta name='viewport' content='width=device-width, initial-scale=1.0, minimum-scale=1.0' />
  <title>Debug payload decoder</title>
  <link rel='icon'
    href='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ™‚</text></svg>' />

  <link rel='stylesheet' href='https://unpkg.com/open-props' />
  <link rel='stylesheet' href='https://unpkg.com/open-props/normalize.min.css' />
  <link rel='stylesheet' href='https://unpkg.com/open-props/buttons.min.css' />
  <link rel='stylesheet' href='../index.css' />
  <link rel='stylesheet' href='decoder.css' />

  <script src='https://unpkg.com/cbor-web'></script>
  <script defer src="decoder.js"></script>

  <style>
    .decoder__output-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1em;
    }
    .decoder__output-table th,
    .decoder__output-table td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
      word-break: break-all;
    }
    .decoder__output-table thead th { /* Style header specifically */
      background-color: #f2f2f2;
      font-weight: bold;
    }
     .decoder__output-table tbody td code {
        display: block;
        white-space: pre-wrap;
        word-break: break-all;
        font-family: monospace; /* Ensure monospace font */
    }
    .decoder__output-table tbody tr:nth-child(even) {
        background-color: #f9f9f9;
    }
    .no-data-row td {
        text-align: center !important; /* Ensure centering */
        font-style: italic;
        color: #777;
    }
  </style>
</head>

<body>
  <main class='demo-container'>
    <div class='demo__header'>
      <img src='../assets/privacy-sandbox-logo.png' alt="Privacy Sandbox Logo"/>
      <h2>Debug payload decoder for the Private Aggregation API</h2>
    </div>
    <section class='demo__gate-container'>
      <div class='demo__gate-header'>
        <h4>INPUT</h4>
        <p>Copy-paste your debug payload below</p>
        <input class="decoder__input" type="text" style="background-color: white;" aria-label="Debug Payload Input">
        <br>
        <button class="demo__button decoder__run" onclick="runDecoder()">Decode</button>
      </div>
    </section>
    <section class='demo__gate-container decoder__output-container'>
      <div class='demo__gate-header'>
        <h4>OUTPUT</h4>
        <table class="decoder__output-table">
          <thead> <tr>
              <th>Bucket (Binary)</th>
              <th>Value (Binary)</th>
              <th>Bucket (Decimal)</th>
              <th>Value (Decimal)</th>
            </tr>
          </thead>
          <tbody id="decoder-output-body"> <tr class="no-data-row">
                <td colspan="4">No data decoded yet.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>
</body>
</html>